@page
@model FAL.FrontEnd.Pages.Admin.AddModel
@{
}
<h2>Add Account</h2>
@if (!ModelState.IsValid)
{
    <div class="alert alert-danger">
        <ul>
            @foreach (var error in ModelState.Values.SelectMany(v => v.Errors))
            {
                <li>@error.ErrorMessage</li>
            }
        </ul>
    </div>
}
@{
    var successMessage = TempData["SuccessMessage"] as string;
    var errorMessage = TempData["ErrorMessage"] as string;
}

@if (!string.IsNullOrEmpty(successMessage))
{
    <div class="alert alert-success">
        @successMessage
    </div>
}

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">
        @errorMessage
    </div>
}
<form method="post">
    <div class="form-group">
        <label for="username">Username</label>
        <input type="text" class="form-control" id="username" name="NewAccount.Username" value="@Model.NewAccount.Username" required />
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" class="form-control" id="password" name="NewAccount.Password" value="@Model.NewAccount.Password" required />
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" name="NewAccount.Email" value="@Model.NewAccount.Email" />
    </div>
    <div class="form-group">
        <label for="roleId">Role</label>
        <select class="form-control" id="roleId" name="NewAccount.RoleId" required>
            <option value="2" selected="@((Model.NewAccount.RoleId == 2) ? "selected" : null)">User</option>
            <option value="1" selected="@((Model.NewAccount.RoleId == 1) ? "selected" : null)">Admin</option>
        </select>

    </div>
    <div class="form-group">
        <label for="systemName">System Name</label>
        <input type="text" class="form-control" id="systemName" name="NewAccount.SystemName" value="@Model.NewAccount.SystemName" required />
    </div>
    <div class="form-group">
        <label for="webhookUrl">Webhook URL</label>
        <input type="url" class="form-control" id="webhookUrl" name="NewAccount.WebhookUrl" value="@Model.NewAccount.WebhookUrl" />
    </div>
    <div class="form-group">
        <label for="webhookSecretKey">Webhook Secret Key</label>
        <input type="text" class="form-control" id="webhookSecretKey" name="NewAccount.WebhookSecretKey" value="@Model.NewAccount.WebhookSecretKey" />
    </div>
    <div class="form-group">
        <label for="status">Status</label>
        <select class="form-control" id="status" name="NewAccount.Status" required>
            <option value="Active" selected="@(Model.NewAccount.Status == "Active")">Active</option>
            <option value="Deactive" selected="@(Model.NewAccount.Status == "Deactive")">Deactive</option>
        </select>

    </div>
    <button type="submit" class="btn btn-primary">Save</button>
</form>
